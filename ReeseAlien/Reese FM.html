<!DOCTYPE html>
<html>
<head>
    
  <meta charset="utf-8">
  <title>Reese the Alien</title>
  <style>
        body, html {
          height: 100%;
          margin: 0;
        }
        
        .bg {
          /* The image used */
          background-image: url("alienware.jpg");
        
          /* Full height */
          height: 100%; 
        
          /* Center and scale the image nicely */
          background-position: center;
          background-repeat: no-repeat;
          background-size: cover;
        }
        </style>
  <script>

// <!-- MOUSE Mapping ####################################################################### -->
    
window.onload = function() {
    this.addEventListener('mousemove', function(e) {
        var x = e.clientX;
        var y = e.clientY;
        var width = window.innerWidth;
        var height = window.innerHeight;
        //console.log(width);
        var widthnor = (x/width); // 0-1 range
        //console.log(widthnor);
        var heightnor = (y/height); // 0-1 range
        console.log(heightnor);
        //console.log(x, y);
        if (playing == 1) {
          //oscillator.frequency.value = x;
          oscillator.frequency.value = widthnor*1000;
          oscilatorFM.frequency.value = heightnor*1000;
          //oscillator2.frequency.value = widthnor*10000;
          //volume.gain.value = 1 - heightnor;
          volume2.gain.value = 1 - heightnor;
         }
      });
    }
    </script>  
   
</head>
<body>
    <div class="bg"></div>

            
<!-- BUTTONS ####################################################################### -->

<button type="button" id="button1">OSC1</button>
<button type="button" id="button2">Shutup</button>
<button type="button" id="button3">Beat</button>
<button type="button" id="button4">FM</button>
<button type="button" id="button5">dunno</button>


<!-- FADERS  ##################################################################### -->

<span>Gain: </span>
    <input id="vaderfader" type="range" min="0.0" max="1.0"
      step="0.01" value="1.0">
    <br>
    <br>
    
<script>
    

// <! VARIABLES ############################################################## -->  

    var oscillator; 
    var oscillator2;
    var volume;
    var volume2;
    var volume3;
    var oscilatorFM;
    var playing = 0;
    var context;
    var OscMix;
    
    
    context = new AudioContext();

// FM OSC button ###################################################################

    document.querySelector("#button4").addEventListener('click', function() {

        oscilatorFM = context.createOscillator();
        oscilatorFM.type = "sawtooth";
        oscilatorFM.frequency.value = 120;
        volumeFM = context.createGain();
        oscilatorFM.connect(volumeFM);
        volumeFM.gain.value = 1500;
        volumeFM.connect(oscillator2.frequency);
        oscilatorFM.start();

        playing = 1;  

    })
// Main Oscillators ##################################################################

    document.querySelector("#button1").addEventListener('click', function() {
        

        oscillator = context.createOscillator();
        oscillator2 = context.createOscillator();
        
        oscillator.type = "sawtooth";
        oscillator2.type = "sawtooth";
        
        oscillator.frequency.value = 0;
        oscillator2.frequency.value = 300;

        oscillator.start();
        oscillator2.start();
        
    
        volume = context.createGain(); 
        volume2 = context.createGain(); 
         

        // defining the volume node
        //volume.gain.value = 0.1;

        oscillator.connect(volume);
        oscillator2.connect(volume2);

        volume.connect(context.destination);
        volume2.connect(context.destination);


        playing = 1;  
        
  });

  var player; 
  document.querySelector("#button3").addEventListener('click', function() {
        
        
        player = context.createBufferSource();
        player.loop = true;

        volume3 = context.createGain();
        volume3.gain.value = 1;

        player.connect(volume3);
        volume3.connect(context.destination);

        loadSound("lipstick jungle newest.wav");

  });
  
  function loadSound(soundfile) {
        var request = new XMLHttpRequest();
        request.open('GET', soundfile, true); 
        request.responseType = 'arraybuffer';

        // Decode asynchronously (how you load the sound )
        request.onload = function() {
        context.decodeAudioData(request.response, function(buffer) {
        player.buffer = buffer;
        player.start();
    }, onError);
  }
  request.send();
  
}
function onError(){
      console.log("The file could not be loaded");
}
  document.querySelector("#button2").addEventListener('click', function() {
    oscillator.stop(); 
    oscillator2.stop();
    player.stop();
    context.stop();
  });
 
  
</script>

<!-- keypress library (must be online to work! adding library to project later?) -->

<script src="https://unpkg.com/hotkeys-js/dist/hotkeys.min.js"></script>
<script type="text/javascript">

// in brackets below list keys to activate

hotkeys('ctrl+a,ctrl+b,r,f,a,w,s,e,d,r,f,t,g,y,h,u,j,i,k,o,l,p,q', function(event,handler) {     
  switch(handler.key){
    // case "ctrl+a":alert('you pressed ctrl+a!');break;
    // case "ctrl+b":alert('you pressed ctrl+b!');break;

// map keys to frequency

    case "a":oscillator2.frequency.value = 65.41;break;
    case "w":oscillator2.frequency.value = 69.30;break;
    case "s":oscillator2.frequency.value = 73.42;break;
    case "e":oscillator2.frequency.value = 77.78;break;
    case "d":oscillator2.frequency.value = 82.41;break;
    case "f":oscillator2.frequency.value = 87.31;break;
    case "t":oscillator2.frequency.value = 92.50;break;
    case "g":oscillator2.frequency.value = 98.00;break;
    case "y":oscillator2.frequency.value = 103.83;break;
    case "h":oscillator2.frequency.value = 110.00;break;
    case "u":oscillator2.frequency.value = 116.54;break;
    case "j":oscillator2.frequency.value = 123.47;break;
  }
});


</script>

<!-- // Tuna plugin -->

<script src="https://cdnjs.cloudflare.com/ajax/libs/tunajs/1.0.8/tuna-min.js"></script>

</body>
</html>